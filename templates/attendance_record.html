<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Attendance Records - Digital Attendance System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div class="overlay"></div>

<div class="main-container">
  <!-- Navigation -->
  <nav class="navbar-glass d-flex justify-content-between align-items-center flex-wrap mb-4">
    <a class="nav-brand" href="/">
      <i class="fas fa-camera-retro"></i>Digital Attendance
    </a>
    <div class="d-flex flex-wrap">
      <a class="nav-btn" href="/">
        <i class="fas fa-home"></i>Dashboard
      </a>
      <a class="nav-btn" href="/add_student">
        <i class="fas fa-user-plus"></i>Add Student
      </a>
      <a class="nav-btn" href="/mark_attendance">
        <i class="fas fa-camera"></i>Mark Attendance
      </a>
      <a class="nav-btn active" href="/attendance_record">
        <i class="fas fa-history"></i>Records
      </a>
    </div>
  </nav>

  <!-- Content Area -->
  <div class="content-area">
    <div class="glass-card p-4">
      <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
        <h4 class="mb-3 mb-md-0">
          <i class="fas fa-history me-2 text-primary"></i>Attendance Records
        </h4>
        <div class="d-flex gap-2">
          <a class="btn-gradient" href="/download_csv?period={{ period }}">
            <i class="fas fa-download me-2"></i>Download CSV
          </a>
          <a class="btn-gradient" href="/" style="background: linear-gradient(135deg, #6c757d 0%, #495057 100%);">
            <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
          </a>
        </div>
      </div>

      <!-- Filter Buttons -->
      <div class="mb-4">
        <div class="d-flex flex-wrap gap-2">
          <a href="/attendance_record?period=all" class="btn btn-sm {{ 'btn-primary' if period == 'all' else 'btn-outline-primary' }}">
            All Time
          </a>
          <a href="/attendance_record?period=daily" class="btn btn-sm {{ 'btn-primary' if period == 'daily' else 'btn-outline-primary' }}">
            <i class="fas fa-calendar-day me-1"></i>Today
          </a>
          <a href="/attendance_record?period=weekly" class="btn btn-sm {{ 'btn-primary' if period == 'weekly' else 'btn-outline-primary' }}">
            <i class="fas fa-calendar-week me-1"></i>This Week
          </a>
          <a href="/attendance_record?period=monthly" class="btn btn-sm {{ 'btn-primary' if period == 'monthly' else 'btn-outline-primary' }}">
            <i class="fas fa-calendar-alt me-1"></i>This Month
          </a>
        </div>
      </div>

      <!-- Records Table -->
      <div class="table-glass">
        <table class="table">
          <thead>
            <tr class="table-dark">
              <th><i class="fas fa-hashtag me-2"></i>ID</th>
              <th><i class="fas fa-id-card me-2"></i>Student ID</th>
              <th><i class="fas fa-user me-2"></i>Name</th>
              <th><i class="fas fa-clock me-2"></i>Timestamp</th>
            </tr>
          </thead>
          <tbody>
          {% if records %}
            {% for r in records %}
              <tr>
                <td>{{ r[0] }}</td>
                <td>
                  <span class="badge-primary badge">{{ r[1] }}</span>
                </td>
                <td>{{ r[2] }}</td>
                <td>
                  <span class="text-muted">{{ r[3] }}</span>
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="4" class="text-center py-5">
                <i class="fas fa-inbox fa-3x mb-3 text-muted"></i>
                <h5 class="text-muted">No records found</h5>
                <p class="text-muted">No attendance records available for this period</p>
              </td>
            </tr>
          {% endif %}
          </tbody>
        </table>
      </div>

      <!-- Pagination Info -->
      {% if records %}
      <div class="d-flex justify-content-between align-items-center mt-4 pt-3 border-top">
        <div class="text-muted">
          Showing {{ records|length }} records
        </div>
        <div>
          <small class="text-muted">Download complete records as CSV</small>
        </div>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-links">
      <a href="https://www.linkedin.com/in/nikhil-kumar-jha-800070319/" target="_blank" class="footer-link">
        <i class="fab fa-linkedin"></i>
        LinkedIn
      </a>
      <a href="https://github.com/Nikhil8599" target="_blank" class="footer-link">
        <i class="fab fa-github"></i>
        GitHub
      </a>
      <a href="mailto:nkjha197410@gmail.com" class="footer-link">
        <i class="fas fa-envelope"></i>
        Contact
      </a>
    </div>
    <div class="copyright">
      Digital Attendance System v1.0 | Made with ❤️ by Nikhil for Educational Purposes
    </div>
  </div>
</div>

</body>
</html>