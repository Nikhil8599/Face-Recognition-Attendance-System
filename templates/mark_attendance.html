<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mark Attendance - Digital Attendance System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<div class="overlay"></div>

<div class="main-container">
  <!-- Navigation -->
  <nav class="navbar-glass d-flex justify-content-between align-items-center flex-wrap mb-4">
    <a class="nav-brand" href="/">
      <i class="fas fa-camera-retro"></i>Digital Attendance
    </a>
    <div class="d-flex flex-wrap">
      <a class="nav-btn" href="/">
        <i class="fas fa-home"></i>Dashboard
      </a>
      <a class="nav-btn" href="/add_student">
        <i class="fas fa-user-plus"></i>Add Student
      </a>
      <a class="nav-btn active" href="/mark_attendance">
        <i class="fas fa-camera"></i>Mark Attendance
      </a>
      <a class="nav-btn" href="/attendance_record">
        <i class="fas fa-history"></i>Records
      </a>
    </div>
  </nav>

  <!-- Content Area -->
  <div class="content-area">
    <div class="row">
      <div class="col-lg-8 mb-4">
        <div class="glass-card p-4">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h4 class="mb-0">
              <i class="fas fa-camera me-2 text-primary"></i>Live Attendance Marking
            </h4>
            <div>
              <button id="startMarkBtn" class="btn-gradient">
                <i class="fas fa-play me-2"></i>Start
              </button>
              <button id="stopMarkBtn" class="btn-gradient" style="background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);" disabled>
                <i class="fas fa-stop me-2"></i>Stop
              </button>
            </div>
          </div>

          <div class="camera-container mb-4">
            <video id="markVideo" width="100%" height="auto" autoplay muted></video>
            <div class="capture-overlay">
              <div class="capture-indicator">
                <i class="fas fa-user fa-2x"></i>
              </div>
              <h5>Face Recognition Active</h5>
              <p class="text-center">Position face within frame</p>
            </div>
          </div>

          <div id="markStatus" class="text-center p-3 glass-card">
            <i class="fas fa-info-circle me-2"></i>
            <span>Ready to start attendance marking</span>
          </div>
        </div>
      </div>

      <div class="col-lg-4 mb-4">
        <div class="glass-card p-4 h-100">
          <h4 class="mb-4">
            <i class="fas fa-list-check me-2 text-primary"></i>Recognized Today
          </h4>

          <div class="mb-3">
            <div class="d-flex justify-content-between align-items-center">
              <span class="text-muted">Students Recognized:</span>
              <span id="recognizedCount" class="badge-primary badge">0</span>
            </div>
            <div class="progress-container mt-2">
              <div id="attendanceProgress" class="progress-bar" style="width: 0%"></div>
            </div>
          </div>

          <div class="recognized-container" style="max-height: 400px; overflow-y: auto;">
            <ul id="recognizedList" class="list-group">
              <!-- Recognized students will appear here -->
            </ul>
            <div id="emptyList" class="text-center py-5 text-muted">
              <i class="fas fa-users fa-3x mb-3"></i>
              <p>No students recognized yet</p>
              <small>Start the camera to begin recognition</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="footer-links">
      <a href="https://www.linkedin.com/in/nikhil-kumar-jha-800070319/" target="_blank" class="footer-link">
        <i class="fab fa-linkedin"></i>
        LinkedIn
      </a>
      <a href="https://github.com/Nikhil8599" target="_blank" class="footer-link">
        <i class="fab fa-github"></i>
        GitHub
      </a>
      <a href="mailto:nkjha197410@gmail.com" class="footer-link">
        <i class="fas fa-envelope"></i>
        Contact
      </a>
    </div>
    <div class="copyright">
      Digital Attendance System v1.0 | Made with ❤️ by Nikhil for Educational Purposes
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/camera_mark.js') }}"></script>
</body>
</html>